<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Adbhutam Chat</title>

<style>
:root {
  --bg: #0f0f0f;
  --panel: #181818;
  --border: #2a2a2a;
  --text: #eaeaea;
  --muted: #9a9a9a;
  --accent: #10a37f;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  display: flex;
  flex-direction: column;
}

/* Header */
header {
  padding: 14px 18px;
  border-bottom: 1px solid var(--border);
  background: var(--panel);
  font-weight: 600;
}

/* Chat area */
#chat {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

/* Messages */
.msg {
  max-width: 760px;
  margin: 0 auto 18px;
  line-height: 1.6;
  font-size: 15px;
}

.user {
  text-align: right;
}

.user .bubble {
  background: #1f1f1f;
}

.bot .bubble {
  background: #141414;
  border-left: 3px solid var(--accent);
}

.bubble {
  padding: 14px 16px;
  border-radius: 10px;
  white-space: pre-wrap;
}

/* Input bar */
footer {
  border-top: 1px solid var(--border);
  background: var(--panel);
  padding: 14px;
}

#inputRow {
  max-width: 760px;
  margin: auto;
  display: flex;
  gap: 10px;
}

#input {
  flex: 1;
  background: #111;
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px;
  color: var(--text);
  font-size: 15px;
}

#send {
  background: var(--accent);
  border: none;
  border-radius: 8px;
  padding: 0 18px;
  font-weight: 600;
  cursor: pointer;
}

#send:active {
  transform: scale(0.98);
}
</style>
</head>

<body>

<header>Adbhutam Brain</header>

<div id="chat"></div>

<footer>
  <div id="inputRow">
    <input id="input" placeholder="Message Adbhutamâ€¦" />
    <button id="send">Send</button>
  </div>
</footer>

<script>
const API = "https://adbhutam-brain.onrender.com/api/chat";

const chat = document.getElementById("chat");
const input = document.getElementById("input");
const send = document.getElementById("send");

function addMsg(text, cls) {
  const wrap = document.createElement("div");
  wrap.className = "msg " + cls;

  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.innerHTML = text.replace(/\n/g, "<br>");

  wrap.appendChild(bubble);
  chat.appendChild(wrap);
  chat.scrollTop = chat.scrollHeight;
}

async function sendMsg() {
  const text = input.value.trim();
  if (!text) return;

  addMsg(text, "user");
  input.value = "";

  try {
    const r = await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: text })
    });
    const d = await r.json();
    addMsg(d.reply || "No reply", "bot");
  } catch {
    addMsg("Server error.", "bot");
  }
}

send.onclick = sendMsg;
input.onkeydown = e => e.key === "Enter" && sendMsg();
</script>

</body>
</html>
